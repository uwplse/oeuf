#If we can do this without sudo, the VM boots up faster
sudo: false
os: linux
dist: trusty

#setting it to C seems to keep it from doing extra work
language: c

addons:
  apt : 
    sources:
      - sourceline : 'ppa:avsm/ppa' 
    packages : 
      - opam
      
before_install:
   - echo "before_install"

install:
   - echo "install"
   - opam --version
   - opam init -y --comp=4.06.1
   - opam update
   - eval $(opam config env)
   - ocaml -version
   - ./scripts/install_coq85.sh
   - cd $HOME
   - git clone "git@github.com:uwplse/StructTact.git"
   - git clone "git@github.com:wilcoxjay/PrettyParsing.git"

before_script:
   - echo "before_script"

script:
   - echo "script"

before_cache:
   - echo "before_cache"

cache:
  apt: true
  directories:
    - $HOME/.cache/bin
    - $HOME/.opam

after_success:
   - echo "after_success"

after_script:
   - echo "after_script"

